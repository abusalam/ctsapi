# Reference: https://learn.microsoft.com/en-us/aspnet/core/test/http-files?view=aspnetcore-8.0
# VSCode Extension: https://marketplace.visualstudio.com/items?itemName=humao.rest-client
# @PensionAPI_HostAddress = https://localhost:7249 
@PensionAPI_HostAddress = http://api.{{$dotenv PROJECT_BASE_URL}}
@accessToken = eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhcHBsaWNhdGlvbiI6IntcIklkXCI6MyxcIk5hbWVcIjpcIkNUU1wiLFwiTGV2ZWxzXCI6W3tcIklkXCI6OCxcIk5hbWVcIjpcIlRyZWFzdXJ5XCIsXCJTY29wZVwiOltcIkRBQVwiXX1dLFwiUm9sZXNcIjpbe1wiSWRcIjoyNyxcIk5hbWVcIjpcImNsZXJrXCIsXCJQZXJtaXNzaW9uc1wiOltcImNhbi1yZWNlaXZlLWJpbGxcIl19XX0iLCJuYW1laWQiOiIzOSIsIm5hbWUiOiJDVFMgQ2xlcmsiLCJuYmYiOjE3MTc5OTY2OTksImV4cCI6MTcxODA4MzA5OSwiaWF0IjoxNzE3OTk2Njk5fQ.tLMRXKlXb2eyiE2ApSRgFgbX9EjvPbGNi1dgp_UpGadv-UitDdS4su2ZV6B4kp4Rf0TXjDQHTW7YvNkwciQVQg
# {{Login.response.body.$.accessToken}}

@treasuryReceiptNo = {{CreatePPOReceipt.response.body.$.result.treasuryReceiptNo}}

@GeneratedPpoId = {{CreatePPODetails.response.body.$.result.ppoId}}

@RevisionId = {{CreatePpoComponentSingleRevision.response.body.$.result.id}}

@ApprovedPpoId = {{SetPpoStatusFlag.response.body.$.result.ppoId}}

@ApprovedPpoIdStatusFlag = {{SetPpoStatusFlag.response.body.$.result.statusFlag}}

### All List APIs
# @name AllPatchAPIs
GET {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipts
# PATCH {{PensionAPI_HostAddress}}/api/v1/pension/primary-category
# PATCH {{PensionAPI_HostAddress}}/api/v1/pension/sub-category
# PATCH {{PensionAPI_HostAddress}}/api/v1/pension/category
# PATCH {{PensionAPI_HostAddress}}/api/v1/pension/component
# PATCH {{PensionAPI_HostAddress}}/api/v1/pension/component-rate
# PATCH {{PensionAPI_HostAddress}}/api/v1/ppo/details
# PATCH {{PensionAPI_HostAddress}}/api/v1/ppo/bank-accounts
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{"pageSize":10,"pageIndex":0,"filterParameters":[],"sortParameters":{"field":"","order":""}}

### Read Ppo Component Revision
# @name ReadPpoComponenRevision
GET {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/component-revision
Accept: application/json
Authorization: Bearer {{accessToken}}

### Delete Ppo Component Revision
# @name DeletePpoComponenRevision
DELETE {{PensionAPI_HostAddress}}/api/v1/ppo/{{RevisionId}}/component-revision
Accept: application/json
Authorization: Bearer {{accessToken}}


### Update Ppo Component Revision
# @name UpdatePpoComponenRevision
PUT {{PensionAPI_HostAddress}}/api/v1/ppo/{{RevisionId}}/component-revision
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "fromDate": "2024-01-01",
  "amountPerMonth": 5000
}

### Create Ppo Component Single Revision
# @name CreatePpoComponentSingleRevision
POST {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/component-revision
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "rateId": 1,
  "fromDate": "2024-01-01",
  "amountPerMonth": 5000
}



### Create Pension Component Rate
# @name CreatePensionBreakupRate
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/pension/component-rate
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "CategoryId": 30,
  "BreakupId": 3,
  "EffectiveFromDate": "2016-05-01",
  "RateAmount": 500,
  "RateType": "A"
}

### Create Pension Component
# @name CreatePensionBreakup
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/pension/component
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ComponentName": "Interim Relief 2016",
  "ComponentType": "P",
  "ReliefFlag": false
}

### Create Pension Category
# @name CreatePensionCategory
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/pension/category
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "PrimaryCategoryId": 4,
  "SubCategoryId": 3
}

### Create Pension SubCategory
# @name CreatePensionSubCategory
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/pension/sub-category
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "SubCategoryName": "ROPA 2026"
}

### Create Pension PrimaryCategory
# @name CreatePensionPrimaryCategory
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/pension/primary-category
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "HoaId": "2071 - 01 - 109 - 00 - 001 - V - 04 - 00",
  "PrimaryCategoryName": "Defence Pension"
}




### Get First Pension Bill By PpoId
# @name GetFirstPensionBillByPpoId
GET {{PensionAPI_HostAddress}}/api/v1/ppo/first-bill/{{GeneratedPpoId}}
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}




### Generate First Pension Bill
# @name GenerateFirstPensionBill
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/ppo/first-bill-generate
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "PpoId": {{GeneratedPpoId}},
  "billType": "F",
  "toDate": "{{$datetime "YYYY-MM-DD"}}"
}


### Capture FirstBill Detaills
@PensionerId = {{CreatePPODetails.response.body.$.result.id}}
@PensionerBankAcId = {{GenerateFirstPensionBill.response.body.$.result.bankAccount.id}}
@BillFromDate = {{GenerateFirstPensionBill.response.body.$.result.pensioner.dateOfCommencement}}
@BillUptoDate = {{GenerateFirstPensionBill.response.body.$.result.billGeneratedUptoDate}}
@BillDate = {{GenerateFirstPensionBill.response.body.$.result.billDate}}
@GrossAmount = {{GenerateFirstPensionBill.response.body.$.result.grossAmount}}
@NetAmount = {{GenerateFirstPensionBill.response.body.$.result.netAmount}}
@TaxAmount = {{GenerateFirstPensionBill.response.body.$.result.grossAmount}}
@PensionerPayments = {{GenerateFirstPensionBill.response.body.$.result.pensionerPayments}}







@QueueName = "cts"
@ConsumerTag = {{StartMqComsumer.response.body.$.result}}

### Send Message
# @name SendMessage
POST {{PensionAPI_HostAddress}}/api/v1/mq/message/{{QueueName}}?contents={{Contents}}
Accept: application/json
Authorization: Bearer {{accessToken}}

@Contents = 50


### Receive SingleMessage
# @name ReceiveSingleMessage
GET {{PensionAPI_HostAddress}}/api/v1/mq/message/{{QueueName}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Start Message Queue Comsumer
# @name StartMqComsumer
GET {{PensionAPI_HostAddress}}/api/v1/mq/start-worker/{{QueueName}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Stop Message Queue Comsumer
# @name StopMqComsumer
GET {{PensionAPI_HostAddress}}/api/v1/mq/stop-worker/{{ConsumerTag}}
Accept: application/json
Authorization: Bearer {{accessToken}}






### Save First Pension Bill
# @name SaveFirstPensionBill
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/ppo/first-bill
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "PpoId": {{GeneratedPpoId}},
  "toDate": "{{$datetime "YYYY-MM-DD"}}"
}

### Create Pensioner Bank Account
# @name CreatePensionerBankAccount
POST {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/bank-accounts
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "payMode":"Q",
  "accountHolderName": "Jack Dowsel",
  "bankAcNo": "{{$randomInt 1000000000000000 9999999999999999}}",
  "ifscCode": "IFSC{{$randomInt 1000000 9999999}}",
  "bankCode": 2,
  "branchCode": 531
}

### Update Pensioner Bank Account
# @name UpdatePensionerBankAccount
PUT {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/bank-accounts
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "payMode":"Q",
  "accountHolderName": "Jack Dowsel",
  "bankAcNo": "{{$randomInt 1000000000000000 9999999999999999}}",
  "ifscCode": "IFSC{{$randomInt 1000000 9999999}}",
  "bankCode": 2,
  "branchCode": 531
}

### Read Pensioner Bank Account
# @name ReadPensionerBankAccount
GET {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/bank-accounts
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}

### Create PPO Details
# @name CreatePPODetails
POST {{PensionAPI_HostAddress}}/api/v1/ppo/details
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "receiptId": {{PpoReceiptID}}, 
  "ppoNo": "{{PpoNo}}",
  "ppoType": "P",
  "psaType": "A",
  "ppoSubType": "N",
  "categoryId": 30,
  "pensionerName": "Jack Dowsel",
  "dateOfBirth": "{{$datetime "YYYY-MM-DD"}}",
  "gender": "M",
  "mobileNumber": "{{$randomInt 6000000000 9999999999}}",
  "emailId": "string",
  "pensionerAddress": "Malda",
  "identificationMark": "S",
  "panNo": "PANNO{{$randomInt 1000 9999}}F",
  "aadhaarNo": "{{$randomInt 600000000000 999999999999}}",
  "dateOfRetirement": "{{$datetime "YYYY-MM-DD" -10000 d}}",
  "dateOfCommencement": "{{$datetime "YYYY-MM-DD" -9999 d}}",
  "basicPensionAmount": 10000,
  "commutedPensionAmount": 2000,
  "enhancePensionAmount": 10000,
  "reducedPensionAmount": 8000,
  "religion": "H"
}

### Collect PPO Receipt Values
@PpoReceiptID = {{CreatePPOReceipt.response.body.$.result.id}}
@PpoNo = {{CreatePPOReceipt.response.body.$.result.ppoNo}}

### Update PPO Details
# @name UpdatePPODetails
# PUT {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/details
POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ppoNo": "PPO-{{$randomInt 100000 999999}}",
  "ppoType": "P",
  "psaType": "A",
  "ppoSubType": "N",
  "ppoCategory": "C",
  "ppoSubCategory": "D",
  "pensionerName": "Jack Smith",
  "dateOfBirth": "{{$datetime "YYYY-MM-DD"}}",
  "gender": "M",
  "mobileNumber": "{{$randomInt 6000000000 9999999999}}",
  "emailId": "string",
  "pensionerAddress": "Kolkata",
  "identificationMark": "S",
  "panNo": "PANNO{{$randomInt 1000 9999}}F",
  "aadhaarNo": "{{$randomInt 600000000000 999999999999}}",
  "dateOfRetirement": "{{$datetime "YYYY-MM-DD"}}",
  "dateOfCommencement": "{{$datetime "YYYY-MM-DD"}}",
  "basicPensionAmount": 10000,
  "commutedPensionAmount": 2000,
  "enhancePensionAmount": 10000,
  "reducedPensionAmount": 8000,
  "religion": "H"
}

### Check PPO Details
# @name CheckPpoDetails
Get {{PensionAPI_HostAddress}}/api/v1/ppo/{{GeneratedPpoId}}/details
Accept: application/json
Authorization: Bearer {{accessToken}}

### Set PPO Approved Flag
# @name SetPpoStatusFlag
POST {{PensionAPI_HostAddress}}/api/v1/ppo/status
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "PpoId": "{{GeneratedPpoId}}",
  "StatusFlag": 1,
  "StatusWef": "{{$datetime "YYYY-MM-DD" -5 d}}"
}

### Set PPO Running Flag
# @name SetPPORunningFlag
POST {{PensionAPI_HostAddress}}/api/v1/ppo/status
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "PpoId": "{{ApprovedPpoId}}",
  "StatusFlag": 4,
  "StatusWef": "{{$datetime "YYYY-MM-DD" -2 d}}"
}

### Clear PPO Approved Flag
# @name ClearPpoStatusFlagByPpoId
DELETE {{PensionAPI_HostAddress}}/api/v1/ppo/{{ApprovedPpoId}}/status/{{ApprovedPpoIdStatusFlag}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Check PPO Approved Flag
# @name GetPpoStatusFlagByPpoId
Get {{PensionAPI_HostAddress}}/api/v1/ppo/{{ApprovedPpoId}}/status/{{ApprovedPpoIdStatusFlag}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Read PPO Receipt Request
# @name GetPPOReceiptByTreasuryReceiptNo
GET {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipts/{{treasuryReceiptNo}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Create PPO Receipt Request
# @name CreatePPOReceipt
POST {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipts
# POST {{PensionAPI_HostAddress}}/api/v1/echo
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ppoNo": "PPO-{{$randomInt 100000 999999}}",
  "pensionerName": "Jack Dowsel",
  "dateOfCommencement": "2024-07-15",
  "mobileNumber": "{{$randomInt 6000000000 9999999999}}",
  "receiptDate": "{{$datetime "YYYY-MM-DD"}}",
  "psaCode": "A",
  "ppoType": "N"
}

### Update PPO Receipt Request
# @name UpdatePPOReceipt
# POST {{PensionAPI_HostAddress}}/api/v1/echo
PUT {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipts/{{treasuryReceiptNo}}
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ppoNo": "PPO-{{$randomInt 100000 999999}}",
  "pensionerName": "Jack Smith",
  "dateOfCommencement": "2024-07-19",
  "mobileNumber": "{{$randomInt 6000000000 9999999999}}",
  "receiptDate": "{{$datetime "YYYY-MM-DD"}}",
  "psaCode": "A",
  "ppoType": "N"
}

### Get DateOnly Request
# @name GetDateOnly
GET {{PensionAPI_HostAddress}}/api/v1/date-only
Accept: application/json
Authorization: Bearer {{accessToken}}


### Set DateOnly Request
# @name SetDateOnly
# POST {{PensionAPI_HostAddress}}/api/v1/echo
POST {{PensionAPI_HostAddress}}/api/v1/date-only
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "dateOnly": "{{$datetime "YYYY-MM-DD"}}"
}

### Retrieve Receipt ID
@ReceiptID = {{CreatePPOReceipt.response.body.$.result.id}}

### Get PPO Receipt By Receipt ID
# @name GetPPOReceiptById
GET {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipt/{{ReceiptID}}
Accept: application/json
Authorization: Bearer {{accessToken}}


### Update PPO Receipt By Receipt ID
# @name UpdatePPOReceiptById
# POST {{PensionAPI_HostAddress}}/api/v1/echo
PUT {{PensionAPI_HostAddress}}/api/v1/manual-ppo/receipt/{{ReceiptID}}
Accept: application/json
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ppoNo": "PPO-{{$randomInt 100000 999999}}",
  "pensionerName": "Jack Smith",
  "dateOfCommencement": "2024-07-19",
  "mobileNumber": "{{$randomInt 6000000000 9999999999}}",
  "receiptDate": "{{$datetime "YYYY-MM-DD"}}",
  "psaCode": "A",
  "ppoType": "N"
}